<h2>{{organisation.Name}}</h2>

{{#if saved}}
<div class="alert alert-success text-center mb-2">Changes saved successfully!</div>
{{/if}}

{{#if error}}
<div class="alert alert-danger text-center mb-2">{{error}}</div>
{{/if}}

<div>
	<div class="row">
		<div class="col-12 col-lg-6 mb-3">
			<div class="card card-body">
				<h3 class="text-center">Address</h3>
				{{#if organisation.Address}}
				{{#with organisation.Address}}
				<p>{{Line1}}</p>
				<p>{{Line2}}</p>
				<p>{{City}}</p>
				<p>{{Postcode}}</p>
				<button type="button" class="btn btn-default" data-bs-toggle="modal" data-bs-target="#addressModal">Edit
					Address</button>
				{{/with}}
				{{else}}
				<div class="alert alert-danger text-center">No address set for this organisation</div>
				<button type="button" class="btn btn-default" data-bs-toggle="modal" data-bs-target="#addressModal">Add
					Address</button>
				{{/if}}
			</div>
		</div>

		<div class="col-12 col-lg-6">
			<div class="card card-body text-center">
				<h3>Contacts</h3>
				{{#if organisation.OrganisationUsers}}
				<div class="card mb-3">
					<div class="list-group list-group-flush">
						{{#each organisation.OrganisationUsers}}
						{{#with User}}
						<div class="list-group-item">{{FirstName}} {{Surname}} - {{Email}}</div>
						{{/with}}
						{{/each}}
					</div>
				</div>
				{{else}}
				<div class="alert alert-danger">No contacts set for this organisation</div>
				{{/if}}

				<a href="contacts" class="btn btn-default">Manage Contacts</a>
			</div>
		</div>
	</div>

	<hr class="my-4" />

	{{#gt organisation.OrgChangeRequests.length 0}}
	<div class="alert alert-warning text-center">There are <b>{{organisation.OrgChangeRequests.length}}</b> change
		requests awaiting approval. <a href="changes">View Change Requests</a></div>
	{{/gt}}

	{{> organisation organisation=organisation types=types required=required uploadToken=uploadToken}}
</div>


<form method="post" action="address">
	<div class="modal fade" id="addressModal" tabindex="-1" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Edit Address</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					{{> address data=organisation.Address required=true}}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-default">Save
						changes</button>
				</div>
			</div>
		</div>
	</div>
</form>