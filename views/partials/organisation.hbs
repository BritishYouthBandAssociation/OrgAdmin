{{#with organisation}}
<div class="form-group mb-3">
	<label class="form-label" for="name">Name</label>
	<input type="text" class="form-control" id="name" name="name" placeholder="Name" value="{{Name}}" required />
</div>

<div class="form-group mb-3">
	<label class="form-label" for="slug">URL Slug</label>
	<input type="text" class="form-control" id="slug" name="slug" placeholder="URL Slug" value="{{Slug}}"{{#unless ../session.user.IsAdmin}} readonly{{/unless}} />
</div>

<div class="form-group mb-3">
	<label class="form-label" for="description">Description</label>
	<textarea rows="7" id="description" class="form-control" name="description" placeholder="Description"{{#if ../required}} required{{/if}}>{{Description}}</textarea>
</div>

<div class="form-group mb-3">
	<label class="form-label" for="type">Organisation Type</label>
	<select id="type" class="form-control" name="type"{{#if ../required}} required{{else}} disabled{{/if}}>
		<option value="">-- Please Select --</option>
		{{#each ../types}}
		<option value="{{id}}" data-type="{{../OrganisationType.id}}" {{#eq id ../OrganisationType.id}} selected{{/eq}}>{{Name}}</option>
		{{/each}}
	</select>
</div>
{{/with}}

<script>
	function generateSlug(value){
		return value.toLowerCase()
			.trim()
            .replace(/[^\w ]+/g, '')
            .replace(/ +/g, '-');
	}

	const slug = document.getElementById("slug"); 
	const name = document.getElementById("name");

	//update initial value?
	slug.value = generateSlug(name.value);

	name.addEventListener("keyup", e => {
		slug.value = generateSlug(name.value);
	});
</script>